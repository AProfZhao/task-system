# task-system

任务管理系统

## 结构

### 宏观结构

* 用户结构

  > 用户指系统的使用者与管理者

  ``` json
  {
    "角色": [
      {"SUPERADMIN" : "超级管理员，仅用于用户管理，只有一个"},
      {"ADMIN" : "管理员，拥有所有内容的所有者/管理者权限"},
      {"_": "用户，所有用户默认拥有，其权限需要根据具体内容而定"}
    ]
  }
  ```

* 容器结构

  > 容器指可以工作或表示工作内容的空间，其组织为树形结构

  ``` json
  {
    "空间": [
      {"project": "项目，顶级空间"},
      {"module": "模块，中间空间，模块之间可以构成多级结构"},
      {"task": "任务，下层空间，直接用于工作"}
    ],
    "task": {"demands": "需求，可多，表示完成任务需要满足的后验条件"}
  }
  ```

* 历史

  > 历史用于记录在系统上的操作，由系统自动生成

  ``` json
  history: [
    "用户管理历史", "空间操作历史", "任务流程历史"
  ]
  ```

### 微观结构

* User(用户)

  ``` json
  {
    "UserKey(用户登录信息)": {
      "username": "用户名",
      "password": "密码",
      "state": "状态:[正常, 禁用]",
      "roles": "角色，可多"
    },
    "UserDesc(用户描述信息)": {
      "name": "名称",
      "desc": "描述",
      "labels": "标签，可多",
      "contacts": "联系方式，可多"
    }
  }
  ```

* Space(空间)

  ``` json
  {
    "title": "标题",
    "type": "类型:[project, module, task]",
    "desc": "描述",
    "state": "状态:[待命，激活，完成，关闭，异常]",
    "stateDesc": "状态描述",
    "principal": "负责人，主要manager",
    "manager": "管理人，具有Space的修改维护权，其权利由principal赋与"
  }
  ```

* Demand(需求)

  ``` json
  {
    "title": "标题",
    "desc": "描述",
    "state": "状态:[待命，激活，完成，关闭，异常]",
    "stateDesc": "状态描述",
    "processor": "处理人，可多，处理需求，并将处理信息反馈给任务管理人",
    "processInfo": "处理信息，由processor添加，添加后自动反馈给任务管理人"
  }
  ```

* History(历史)

  ``` json
  {
    "type": "类型:[用户管理历史, 空间操作历史, 任务流程历史]",
    "owner": "拥有者，是什么内容产生的此历史",
    "timestamp": "时间戳",
  }
  ```

## 场景

* 需求 创建->处理->进一步处理->完成
  1. taskA的管理人userA创建需求demandA给userB
  2. userB接收此需求后成为demandA的处理人
  3. userB满足需求后创建处理信息，表示已完成需求
  4. 管理人userA收到此处理信息进行验证，表示不合格，从而驳回此处理信息
  5. userB根据驳回信息进一步完善需求，再次创建处理信息，表示已经完成需求
  6. 管理人userA收到此处理信息进行验证，表示通过，从而接收此处理信息，并设置demandA的状态为已完成
